@using Microsoft.AspNetCore.Components.Forms
@using SGRRHH.Local.Domain.Entities
@using SGRRHH.Local.Domain.Enums

@if (IsVisible && Empleado != null)
{
    <div class="confirm-overlay" @onclick="Cerrar">
        <div class="confirm-dialog" style="width: 600px;" @onclick:stopPropagation="true">
            <div class="confirm-header">FOTO DEL EMPLEADO: @Empleado.NombreCompleto</div>
            <div class="confirm-body" style="text-align: center;">
                <div style="margin: 20px auto; width: 200px; height: 200px; border: 2px solid #000; display: flex; align-items: center; justify-content: center; background: #F0F0F0;">
                    @if (!string.IsNullOrEmpty(Empleado.FotoPath))
                    {
                        <img src="@GetFotoUrl()" key="@Empleado.FotoPath" style="width: 100%; height: 100%; object-fit: cover; background-color: #FFFFFF !important;" alt="Foto actual" />
                    }
                    else
                    {
                        <span style="font-size: 48px; color: #999;">@GetInitials()</span>
                    }
                </div>

                <div style="display: flex; flex-direction: column; gap: 10px; margin-top: 20px;">
                    <button class="btn" @onclick="AbrirScannerFoto">
                        üì∑ ESCANEAR/TOMAR FOTO
                    </button>

                    <label class="btn" style="margin: 0; cursor: pointer;">
                        üíæ SUBIR ARCHIVO
                        <InputFile OnChange="OnFotoArchivoSubido" accept="image/*" style="display: none;" />
                    </label>

                    @if (!string.IsNullOrEmpty(Empleado.FotoPath))
                    {
                        <button class="btn btn-danger" @onclick="EliminarFoto">
                            üóëÔ∏è ELIMINAR FOTO
                        </button>
                    }
                </div>
            </div>
            <div class="confirm-footer">
                <button class="btn" @onclick="Cerrar">CERRAR</button>
            </div>
        </div>
    </div>
}
