<Window x:Class="SGRRHH.WPF.Views.SmsVerificationWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Verificación WhatsApp"
        Height="340" Width="360"
        WindowStartupLocation="CenterScreen"
        WindowStyle="None"
        AllowsTransparency="False"
        Background="#C0C0C0"
        ResizeMode="NoResize">
    
    <Window.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="../Resources/Styles/LegacyTheme.xaml"/>
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </Window.Resources>
    
    <Border BorderThickness="2" BorderBrush="#808080" Background="#C0C0C0">
        <Border BorderThickness="2" BorderBrush="White" Margin="0,0,2,2">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                
                <!-- Barra de título Legacy -->
                <Border Grid.Row="0" Background="#000080" Padding="5,3"
                        MouseLeftButtonDown="TitleBar_MouseLeftButtonDown">
                    <Grid>
                        <TextBlock Text="Verificacion WhatsApp" FontFamily="Tahoma" FontSize="11" 
                                   FontWeight="Bold" Foreground="White" VerticalAlignment="Center"/>
                        <Button Content="X" HorizontalAlignment="Right" 
                                Click="CancelButton_Click"
                                FontFamily="Tahoma" FontSize="9" FontWeight="Bold"
                                Width="18" Height="18" Padding="0"
                                Style="{StaticResource LegacyButtonStyle}"/>
                    </Grid>
                </Border>
                
                <!-- Contenido -->
                <Border Grid.Row="1" Background="White" Margin="10" Padding="15"
                        BorderThickness="2" BorderBrush="#808080">
                    <Border BorderThickness="2" BorderBrush="#404040" Margin="-2,-2,0,0" Padding="15">
                        <StackPanel>
                            <!-- Icono ASCII y mensaje -->
                            <TextBlock Text="[?]" FontFamily="Courier New" FontSize="28" FontWeight="Bold" 
                                       Foreground="#000080" HorizontalAlignment="Center" Margin="0,0,0,10"/>
                            <TextBlock Text="INGRESE CODIGO DE VERIFICACION" FontFamily="Tahoma" FontSize="10" 
                                       FontWeight="Bold" Foreground="#000000" HorizontalAlignment="Center" Margin="0,0,0,5"/>
                            <TextBlock x:Name="PhoneLabel" Text="Enviado por WhatsApp a +57***907" 
                                       FontFamily="Tahoma" FontSize="9" Foreground="#808080" 
                                       HorizontalAlignment="Center" Margin="0,0,0,15"/>
                            
                            <!-- Campo de código -->
                            <TextBox x:Name="CodeTextBox" 
                                     MaxLength="6"
                                     FontFamily="Courier New" FontSize="24" FontWeight="Bold"
                                     TextAlignment="Center"
                                     Padding="8,5" Margin="0,0,0,10"
                                     Style="{StaticResource LegacyTextBoxStyle}"
                                     PreviewTextInput="CodeTextBox_PreviewTextInput"
                                     TextChanged="CodeTextBox_TextChanged"/>
                            
                            <!-- Checkbox recordar dispositivo -->
                            <CheckBox x:Name="TrustDeviceCheckbox" 
                                      Content="Recordar este dispositivo por 30 dias"
                                      FontFamily="Tahoma" FontSize="9"
                                      Margin="0,0,0,10" HorizontalAlignment="Center"
                                      IsChecked="True"/>
                            
                            <!-- Mensaje de error -->
                            <Border x:Name="ErrorBorder" Background="#FFCCCC" 
                                    BorderThickness="1" BorderBrush="#800000"
                                    Padding="8" Margin="0,0,0,10" Visibility="Collapsed">
                                <TextBlock x:Name="ErrorText" Foreground="#800000" FontFamily="Tahoma" FontSize="9"
                                           TextWrapping="Wrap" TextAlignment="Center"/>
                            </Border>
                            
                            <!-- Botones -->
                            <Grid Margin="0,5,0,0">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="10"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                
                                <Button x:Name="ResendButton" Grid.Column="0"
                                        Content="Reenviar" 
                                        Click="ResendButton_Click"
                                        Style="{StaticResource LegacyButtonStyle}"
                                        FontFamily="Tahoma" FontSize="10" Padding="8,5"/>
                                
                                <Button x:Name="VerifyButton" Grid.Column="2"
                                        Content="Verificar" 
                                        Click="VerifyButton_Click"
                                        IsEnabled="False"
                                        Style="{StaticResource LegacyButtonStyle}"
                                        FontFamily="Tahoma" FontSize="10" FontWeight="Bold" Padding="8,5"/>
                            </Grid>
                        </StackPanel>
                    </Border>
                </Border>
                
                <!-- Indicador de carga -->
                <Border Grid.Row="2" Background="#E0E0E0" BorderThickness="0,1,0,0" BorderBrush="#808080" Padding="5,3">
                    <StackPanel x:Name="LoadingPanel" Orientation="Horizontal" 
                                HorizontalAlignment="Center" Visibility="Collapsed">
                        <TextBlock x:Name="LoadingText" Text="Verificando..." 
                                   FontFamily="Tahoma" FontSize="9" Foreground="#404040"/>
                    </StackPanel>
                </Border>
            </Grid>
        </Border>
    </Border>
</Window>
